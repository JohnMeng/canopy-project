<html>
<head>
<title>canopy - Tutorial</title>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,700|ABeeZee|Titillium+Web:200,300,400,700' rel='stylesheet' type='text/css'>
<link href='canopy.css' rel='stylesheet' type='text/css'>
</head>

<body>
<div class="top-bar shutterstock-network">
    <div class=center_channel>
        <table cellpadding=0 cellspacing=0><tr><td>
            <a href='http://canopy.link' class=logo>canopy</div>
        </td><td width=450>
            &nbsp;
        </td><td><a target=_new href="http://www.github.com/canopy-project">source code</a>
        </td><td style='padding-left:30px'><a href=".">documentation</a>
        </td><td style='padding-left:30px'><a target=_new href="http://muut.com/canopy-project">forum</a>
        </tr></table>
    </div>
</div>
<div class=main-section>
    <div>
        <div class=center_channel style="padding-top:6px">
            <div class='warning_bar'><span class=hvy>Notice:</span> this draft
            specification is under active development and subject to change.
            </div>

            <div class="xxl thin">Smart Device Description Language</div>

            <h2>Overview</h2>
            The <span class=logo-in-text>Smart Device Description
            Language (SDDL) </span> is a JSON-based document format used throughout
            <span class=logo-in-text>canopy</span> to convey meta-data about a
            device's sensors and controls.
            
            
            <h2>Format</h2>
            <h4>Top-Level JSON Object</h4>
            SDDL documents are JSON-encoded.  Each SDDL document contains a
            single top-level JSON object, beginning with <span
            class=icode>{</span> and ending with <span class=icode>}</span>.  This top-level object may contain 0 or more keys.

            <p>For example, here is the simplest allowable SDDL document:
            <div class=code>{
}</div>

            The general top-level structure is:

            <div class=code>{
    <div class=code_template>METADATA KEY</div> : <div class=code_template>METADATA VALUE</div>,
    <div class=code_template>METADATA KEY</div> : <div class=code_template>METADATA VALUE</div>,
    ...

    <div class=code_template>CANOPY CLASS NAME</div> : { <div class=code_template>CANOPY CLASS OBJECT</div> },
    <div class=code_template>CANOPY CLASS NAME</div> : { <div class=code_template>CANOPY CLASS OBJECT</div> },
    ...
}</div>

            <h4>Canopy Class Name</h4>
            Each key of the top-level object that begins with a letter is
            called a <b>Canopy Class Name</b>.  A <b>Canopy Class Name</b> must contain only the characters 
            <div class=icode>A-Z</div>, 
            <div class=icode>a-z</div>, 
            <div class=icode>0-9</div>, 
            <div class=icode>_</div> (underscore), and
            <div class=icode>.</div> (dot).

            Case is ignored, but by convention all lower-case is used.

            <p>To avoid namespace collisions, it is recommended that <b>Canopy Class Names</b> obey the following convention:
            <p>
            <div class=icode>PRODUCT_NAME</div>
            <div class=icode>.</div>
            <div class=icode>OPTIONAL_SUB_NAMESPACES</div>
            <div class=icode>.</div>
            <div class=icode>PRODUCT_MODEL</div>
            <p>That is:
            <ul>
                <li>Begin with the name of the <b>product vendor</b> then a <div class=icode>.</div> (dot).</li>
                <li>Follow with 0 or more sub-namespaces of the vendor's choosing, each ending with a <div class=icode>.</div> (dot).</li>
                <li>Finish with specific <b>product model</b>.
            </ul>

            This example SDDL file shows the <b>Class Names</b> for two
            hypothetical products:

            <div class=code>{
    "miele.smart_oven_3000" : { },
    "dyson.fans.dyson_cool.am08" : { },
}</div>
            <h4>Special Top-Level Keys</h4>
            Top-level keys that begin with 
            <div class=icode>__</div> (double underscore) are reserved and some
            have special purposes.  For example, an SDDL file's authors may be
            specified with:

            <div class=code>{
    "__authors" : ["Philip J. Fry (fry@futurarama.com)"],
}</div>

        Valid <b>special top-level keys</b> are:
        <table border=1>
        <tr>
        <td>__authors</td>
        <td>List of strings, specifying the document's authors.</td>
        </table>

        <h4>Canopy Class Object</h4>
        Each <b>Canopy Class Name</b> key has a corresponding value called the
        <b>Canopy Class Object</b>, which must be a JSON object.  The <b>Canopy
        Class Object</b> decribes the controls and sensors supported by the
        device.  It contains keys, called <b>Device Property Names</b> and corresponding values called <b>Device Property Objects</b>:

            <div class=code>{
    "mybrand.mydevice" : {
        <div class=code_template>DEVICE PROPERTY NAME</div> : { <div class=code_template>DEVICE PROPERTY OBJECT</div> },
        <div class=code_template>DEVICE PROPERTY NAME</div> : { <div class=code_template>DEVICE PROPERTY OBJECT</div> },
        <div class=code_template>DEVICE PROPERTY NAME</div> : { <div class=code_template>DEVICE PROPERTY OBJECT</div> },
        ...
    },
}</div>

        <h4>Device Property Name</h4>
        The device property name may be at most 255 characters in length and must contain only the characters
            <div class=icode>A-Z</div>, 
            <div class=icode>a-z</div>, 
            <div class=icode>0-9</div>, and
            <div class=icode>_</div> (underscore).
        Here too, case is ignored, and by convention lowercase is always used.

        <h4>Device Property Object</h4>
        The value corresponding to a <b>Canopy Property Name</b> must be a JSON
        object and is called the <b>Device Property Object</b>.  This object
        describes a sensor or control on the device, and has the following fields.

        <table border=1 cellpadding=8 cellspacing=0>
            <tr>
                <td>Field</td>
                <td>Optional?</td>
                <td>JSON type</td>
                <td>Description</td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"category"</div></td>
                <td valign=top>Required</td>
                <td valign=top>String</td>
                <td valign=top>Must be one of the following:
                    <ul>
                        <li>SENSOR</li>
                        <li>CONTROL</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"datatype"</div></td>
                <td valign=top>Required</td>
                <td valign=top>String</td>
                <td valign=top>Must be one of the following:
                    <ul>
                        <li>SENSOR</li>
                        <li>CONTROL</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"min-value"</div></td>
                <td valign=top>Optional</td>
                <td valign=top>Number or NULL</td>
                <td valign=top>Minimum allowed value.
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"max-value"</div></td>
                <td valign=top>Optional</td>
                <td valign=top>Number or NULL</td>
                <td valign=top>Maximum allowed value.
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"control-type"</div></td>
                <td valign=top>Optional</td>
                <td valign=top>String</td>
                <td valign=top>
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"sensor-type"</div></td>
                <td valign=top>Optional</td>
                <td valign=top>String</td>
                <td valign=top>
                </td>
            </tr>
            <tr>
                <td valign=top><div class=icode>"description"</div></td>
                <td valign=top>Optional</td>
                <td valign=top>String</td>
                <td valign=top>
                </td>
            </tr>
        </table>

    </div>
</body>
</html>
