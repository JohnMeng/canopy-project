<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="index.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,700|ABeeZee|Titillium+Web:200,300,400,700' rel='stylesheet' type='text/css'>
    <link href='apidocs.css' rel='stylesheet' type='text/css'>
</head>

<body>
<div class=main>
    <h1>Canopy Embedded Configuration</h1>
    <h4>Table of Contents</h4>
    <p>
        <a href=#intro>Introduction</a><br>
        <a href=#location>Config file location</a><br>
        <a href=#format>Config file format</a><br>
        <a href=#example>Example config</a><br>
    </p>
    <p>
    </p>

    <h2><a name=intro>Introduction</a></h2>
    <p>
        This document describes how to configure libcanopy using a
        configuration file. 
    </p>

    <h2><a name=location>Config file location</a></h2>
    <p>
        When libcanopy is initialized, it tries to locate a configuration file
        in this order:<br><br>
        <table class=paramtable>
            <tr>
                <th>Location</th>
                <th>Priority</th>
                <th>Details</th>
            </tr>
            <tr>
                <td>$CANOPY_HOME/canopy.conf.json</td>
                <td>Highest</td>
                <td>If the environment variable <code>$CANOPY_HOME</code> is set, looks here first.</td>
            </tr>
            <tr>
                <td>~/.canopy/canopy.conf.json</td>
                <td>&nbsp;</td>
                <td>Second, looks in the home directory ($HOME).</td>
            </tr>
            <tr>
                <td>SYSCONFIGDIR/canopy.conf.json</td>
                <td>&nbsp;</td>
                <td>Third, looks in the SYSCONFIGDIR that was configured when
                libcanopy was compiled.  Run "cano info" to see
                the value of SYSCONFIGDIR.</td>
            </tr>
            <tr>
                <td>/etc/canopy/canopy.conf.json</td>
                <td>Lowest</td>
                <td>Finally, look here.  This is the typical location of "canopy.conf.json" .</td>
            </tr>
        </table>
    </p>
    <p>
        The system will read and use the first configuration file encountered
        from the list above.  At this time, <code>libcanopy</code> does not
        combine configuration files in any way.
    </p>

    <h2><a name=format>Config file format</a></h2>
    <p>
        Canopy configuration files are written in JSON.  In addition to standard JSON, C-style comments are supported (i.e. <code>/* */</code>)
    </p>

    <h2><a name=example>Example config</a></h2>
    <p>
        The default Canopy configuration file, shown here, documents all available options:
        <div class=code>{
    /* 
     *  "cloud-host"
     *
     *  Hostname of Canopy cloud service.
     *  By default, "canopy.link" is used, which is the official cloud service
     *  hosted by the Canopy team.  If you'd rather the device talk to a
     *  different server, you can change that here.
     */
    "cloud-host" : "canopy.link",

    /*
     *  "cloud-http-port"
     *
     *  Canopy cloud service HTTP port.
     *  Used only when "cloud-use-https" is false, ignored otherwise.
     *  By default, 80 is used
     */
    "cloud-http-port" : 80,

    /*
     *  "cloud-https-port"
     *
     *  Canopy cloud service HTTPS port.
     *  Used only when "cloud-use-https" is true, ignored otherwise.
     *  By default, 433 is used
     */
    "cloud-https-port" : 433,

    /*
     *  "cloud-use-https"
     *
     *  Use HTTPS for web communications with the Canopy cloud service?
     *  By default, true.
     *  WARNING: Setting this to false is highly insecure and should only be
     *  used during testing and development.
     */
    "cloud-use-https" : true,
}</div>
    </p>

    <p>
        <center>
        The content of this page is licensed under the Creative Commons Attribution 3.0 License, and code is licensed under a BSD license.
    </p>
    <br>
    <br>
</div>
</body>
</html>
