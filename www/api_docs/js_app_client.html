<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="index.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,700|ABeeZee|Titillium+Web:200,300,400,700' rel='stylesheet' type='text/css'>
    <link href='apidocs.css' rel='stylesheet' type='text/css'>
</head>

<body>
<div class=main>
    <h1>Canopy Application Client (Javascript)</h1>
    <p>
        <a href=#intro>Introduction</a><br>
        <a href=#hw>Hardware and OS Requirements</a><br>
        <a href=#features>Features</a><br>
        <a href=#components>Components</a>
    </p>

    <h2><a name=intro>Introduction</a></h2>
    <p>
        The <b>Canopy Application Client (Javascript)</b> is a javascript
        library for interacting with <b>Canopy-enabled</b> smart products.
    </p>
    <p>
    <p>
        This library consists of a single file <code>canopy_client.js</code>.
        The latest version can be found on github: <a target=_blank href='http://github.com/canopy-project/canopy-js-client'>http://github.com/canopy-project/canopy-js-client</a>
    </p>

    <h2><a name=intro>Quick tutorial</a></h2>
    <p>
        The first step is to initialize the library:
    </p>
    <div class=code>var canopy = new CanopyClient();</div>
    <p>
        The library will automatically make some AJAX requests to the canopy
        cloud service.  You can setup a callback to be notified when the system is
        ready:
    </p>
    <div class=code>canopy.onReady(function() {
    // Canopy is ready to be used.
});
</div>
    <p>
        The CanopyClient object contains a CanopyAccount object which has
        information about the currently-authenticated user, if any.
    </p>
    <div class=code>canopy.onReady(function() {
    if (canopy.account) {
        alert("Hello " + canopy.account.username());
    } else {
        alert("Please log in at http://canopy.link");
        return;
    }
    ...
</div>
    <p>
        The CanopyClient object also contains a CanopyDeviceList object, which
        has information about all of the user's devices.
    </p>
    <div class=code>    ...
    var numDevices = canopy.devices.length;
    var numOnline = canopy.devices.connected().length;
    var numOffline = canopy.devices.disconnected().length;
    alert("You have access to " + numDevices + " devices, of which " + numOnline + " are online");
    ...
</div>
    <p>
        You can obtain a single CanopyDevice using either an array index or the device's ID.
    </p>
    <div class=code>    ...
    var firstDevice = canopy.devices[0];
    var firstConnectedDevice = canopy.devices.connected()[0];
    var mySmartFan = canopy.devices["784f2160-0882-11e4-9191-0800200c9a66"];
    ...
</div>
    <p>
        Every Canopy device has an <a href='sddl_spec.html'>SDDL
        description</a> that describes the device's sensors and controls.  This
        description is stored on the device, and is automatically communicated
        to the rest of the Canopy system (including this client library).  In
        this example, lets consider a "smart fan", that has controllable speed
        and an integrated temperature and humidity sensor.  The SDDL
        description looks like this:
    </p>
    <div class=code>{
    "authors" : ["Greg Prisament (greg@canopy.link)"],
    "description" : "SDDL class for controlling a modded Honeywell fan.",

    "class canopy.example.fan" : {
        "control speed" : {
            "datatype" : "int8",
            "min-value" : 0,
            "max-value" : 3
        },
        "sensor temperature" : {
            "datatype" : "float32",
            "units" : "degrees_f"
        },
        "sensor humidity" : {
            "datatype" : "float32",
            "numeric-display-hint" : "percentage"
        }
    }
}</div>

    <p>
        The javascript client library makes it simple to access these
        properties.  In this example, to get the current humidity level:
    </p>
    <div class=code>    var curHumidity = mySmartFan.properties.humidity.value();</div>
    <p>
        To get notified whenever the value of this property changes, you can
        setup a callback:
    </p>
    <div class=code>    mySmartFan.properties.humidity.onChange(function(property) {
        alert("The humidity is now: " + property.value());
    });</div>

    <p>
        To get the historical time-series data for this property, use:
    </p>
    <div class=code>    mySmartFan.properties.humidity.fetchHistoricData({
        onSuccess: function(data) {
            console.log(data);
        },
        onFailure: function(reason) {
            alert("Problem fetching historical humidity data: " + reason);
        }
    );</div>

    <p>
        You can also get the current fan speed setting:
    </p>
    <div class=code>    var fanSpeed = properties.speed.value();</div>

    <p>
        To remotely change the speed of the fan, call:
    </p>
    <div class=code>    mySmartFan.properties.speed.setTargetValue(3, {
        onSuccess: function(data) {
            alert("Fan speed set to max!");
        },
    );</div>

    <p>
        The previous example assumes that you know the name and details of
        mySmartFans's properties.  However, a generic application will need to
        discover this information at runtime.  This next code snippet
        demonstrates how to do this:
    </p>
    <div class=code>    var out = "";

    // loop over all devices
    for (var i = 0; i &lt; canopy.devices.length; i++) {
        var device = canopy.devices[i];

        out += device.name() + " has the following properties:&lt;br&gt;";

        // loop over all properties that this device has:
        for (var j = 0; j &lt; device.properties.length; i++) {
            var prop = device.properties[i];

            if (prop.isControl()) {
                // prop is a CanopyControlInstance object.
                out += prop.name() + " is a control with datatype " + prop.datatype() + "&lt;br&gt;";
            }
            else if (prop.isSensor()) {
                // prop is a CanopySensorInstance object.
                out += prop.name() + " is a sensor with datatype " + prop.datatype() + "&lt;br&gt;";
            }
            else if (prop.isClass()) {
                // prop is a CanopyClassInstance object.
                out += prop.name() + " is child class with " + prop.properties.length + " properties&lt;br&gt;";
            }
        }
    }

    jQuery("#main").append(out);
    </div>
    <p>
        This section only scratches the surface of what you can do with Canopy
        and the javascript client.  The following sections provide a complete
        reference.
    </p>
    <h3>Getting Help</h3>
    <p>
        If you have any questions or need help with Canopy, please post your
        questions to the <a target=_blank
        href=https://groups.google.com/a/canopy.link/forum/#!forum/community>community@canopy.link</a>
        Google Group.
    </p>

    <h2><a name=intro>Library Overview</a></h2>
    <p>
        This section summarizes the objects that are provided by the library:
    </p>

    <div class=method_outer>
        <div class=method_title>
            CanopyClient object
        </div>
        <div class=method_body>
            <b>Description:</b> Main library object that must be created before
            you can do anything else.
            <div class=param_outer>
                <div class=param_title><b>Members</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>account</div>
                        Type: <a href=..>CanopyAccount object</a>, or null<br>
                        Represents the currently-authenticated user, if any.
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>devices</div>
                        Type: <a href=..>CanopyDeviceList object</a>, or null<br>
                        Contains all devices that the currently-authenticated
                        user has access to.
                    </div>
                </div>
            </div>

            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.apiBaseUrl()</div>
                        Obtain the URL prefix used to make API requests.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.finishShareTransaction([params])</div>
                        Complete a pending device sharing transaction.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.login([params])</div>
                        Attempt to sign in.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.logout([params])</div>
                        Attempt to logout the currently-signed-in account.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onDeviceAdded(callback)</div>
                        Register callback that is triggered when a new device
                        is added to the account.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onLogin(callback)</div>
                        Register callback that is triggered when an account has
                        signed in the Canopy Cloud Service.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onLogout(callback)</div>
                        Register callback that is triggered when an account has
                        signed out.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onReady(callback)</div>
                        Register callback that is triggered when the
                        CanopyClient is ready to be used.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onRefresh(callback)</div>
                        Register callback that is triggered when the
                        CanopyClient's account and device data has been
                        refreshed.
                    </div>
                </div>
            </div>
        </div>
    </div><br>
    </p>

    <div class=method_outer>
        <div class=method_title>
            CanopyAccount object
        </div>
        <div class=method_body>
            <b>Description:</b> Represents a user account.
            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.email()</div>
                        Obtain email address associated with this account.

                    </div>
                    <div class=param_section>
                        <div class=param_name>.username([params])</div>
                        Obtain username associated with this account.
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            CanopyDevice object
        </div>
        <div class=method_body>
            <b>Description:</b> Represents a <b>Canopy-enabled</b> device.
            <div class=param_outer>
                <div class=param_title><b>Members</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>properties</div>
                        Type: <a href=..>CanopyClassInstance object</a><br>
                        Top-level container for the device's sensors and controls.
                    </div>
                </div>
            </div>

            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.friendlyName()</div>
                        Obtain user-assigned name for this device.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.friendlyName(name)</div>
                        Change user-assigned name for this device.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.id()</div>
                        Obtain unique ID of this device.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.isConnected()</div>
                        Check if this device currently connected to the <b>Canopy Cloud Service</b>.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onConnectionStatusChange()</div>
                        Register callback that gets triggered when the
                        connection status of this device changes.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onRefresh()</div>
                        Register callback that gets triggered when this
                        device's data has been refreshed.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.onRemoved()</div>
                        Register callback that is triggered when this device
                        is removed from the account.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.share([params])</div>
                        Share access to this device with someone else.
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            CanopyDeviceList object
        </div>
        <div class=method_body>
            <b>Description:</b> Represents a list of devices.
            <div class=param_outer>
                <div class=param_title><b>Array-style Access</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>[&lt;index&gt;]</div>
                        Type: <a href=..>CanopyDevice object</a><br>
                        Access a device using array-style access.  For example: devices[0];
                    </div>
                    <div class=param_section>
                        <div class=param_name>.length</div>
                        Type: integer<br>
                        Number of items in the collection.
                    </div>
                </div><br>

                <div class=param_title><b>Object-style Access</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>[&lt;device_id&gt;]</div>
                        Type: <a href=..>CanopyDevice object</a><br>
                        Access a device by its ID.  For example: devices["784f2160-0882-11e4-9191-0800200c9a66"];
                    </div>
                </div>
            </div>

            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.filter([params])</div>
                        Create a filtered device list from this list.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.connected()</div>
                        Create a filtered device list containing only connected devices.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.disconnected()</div>
                        Create a filtered device list containing only disconnected devices.
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            CanopyPropertyInstance object
        </div>
        <div class=method_body>
            <b>Description:</b> Base interface implemented by
            CanopyClassInstance, CanopyControlInstance, and
            CanopySensorInstance.  Represents a device property.
            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.isClass()</div>
                        Check if this object is a CanopyClassInstance.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.isControl()</div>
                        Check if this object is a CanopyControlInstance.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.isSensor()</div>
                        Check if this object is a CanopySensorInstance.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.propertyType()</div>
                        Obtain the property type.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.name()</div>
                        Obtain property name.
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            CanopyClassInstance object
        </div>
        <div class=method_body>
            <b>Description:</b> Represents an collection of "smart" device
            properties, including sensors, controls, and child classes.
            <div class=param_outer>
                <div class=param_title><b>Array-style Access</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>[&lt;index&gt;]</div>
                        Type: <a href=..>CanopyPropertyInstance object</a><br>
                        Access a member property using array-style access.  For example: properties[0];
                    </div>
                    <div class=param_section>
                        <div class=param_name>.length</div>
                        Type: integer<br>
                        Number of items in the collection.
                    </div>
                </div><br>

                <div class=param_title><b>Object-style Access</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>[&lt;device_id&gt;]</div>
                        Type: <a href=..>CanopyDevice object</a><br>
                        Access a device by its ID.  For example: devices["784f2160-0882-11e4-9191-0800200c9a66"];
                    </div>
                </div>
            </div>

            <div class=param_outer>
                <div class=param_title><b>Methods</b><br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>.filter([params])</div>
                        Create a filtered device list from this list.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.connected()</div>
                        Create a filtered device list containing only connected devices.
                    </div>
                    <div class=param_section>
                        <div class=param_name>.disconnected()</div>
                        Create a filtered device list containing only disconnected devices.
                    </div>
                </div>
            </div>
        </div>
    </div><br>
    </p>
    <h2><a name=intro>CanopyClient object</a></h2>
    <h3>Initialization</h3>
    <p>
        This library is initialized by creating a <b>CanopyClient</b> object:
    </p>
    <div class=code>var canopy = new CanopyClient();</div>
    <p>
        Optional creation parameters can be supplied to the constructor:
    </p>
    <div class=code>var canopy = new CanopyClient({
    cloudHost: "api.mycanopyserver.com",
    cloudHTTPPort: 8080,
    cloudUseHTTPS: false
});</div>

    <h3>CanopyClient Methods</h3>
    <div class=method_outer>
        <div class=method_title>
            new CanopyClient([params])
            <div class=method_returns><i>Returns:</i> CanopyClient or null</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Initializes the library.
            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing zero or more of the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>cloudHost</div>
                        Type: string<br>
                        Defaults to: <code>"canopy.link"</code><br>
                        Hostname of the Canopy cloud server.
                    </div>
                    <div class=param_section>
                        <div class=param_name>cloudHTTPPort</div>
                        Type: integer<br>
                        Defaults to: <code>80</code><br>
                        HTTP port of the Canopy cloud server.  This is ignored if
                        <code>cloudUseHTTPS</code> is <code>true</code>.
                    </div>
                    <div class=param_section>
                        <div class=param_name>cloudHTTPSPort</div>
                        Type: integer<br>
                        Defaults to: <code>433</code><br>
                        HTTPS port of the Canopy cloud server.  This is ignored if
                        <code>cloudUseHTTPS</code> is <code>false</code>.
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>cloudUseHTTPS</div>
                        Type: boolean<br>
                        Defaults to: <code>true</code><br>
                        If <code>true</code>, HTTPS is used in all requests.
                        Otherwise, HTTP is used.<br><br>
                        <b>WARNING:</b> Setting this to <code>false</code> is
                        highly insecure and should only be used during testing and
                        development.
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyClient object)</span> .apiBaseUrl()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain the URL prefix used to make API requests.<br><br>

            This is based on the <code>cloudHost</code>, <code>cloudHTTPPort</code>,
            <code>cloudHTTPSPort</code>, and <code>cloudUseHTTPS</code> settings
            provided when the CanopyClient object was initialized.

            <br><br>Example return value might be: <code>"http://canopy.link:8080"</code>

            <br><br>Example:
            <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    alert(canopy.apiBaseUrl());
}
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyClient object)</span> .fetchAccount([params])
            <div class=method_returns><i>Returns:</i> undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain a CanopyAccount object for the currently-signed in account.
            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>onFailure</div>
                        Type: <code>function(reason)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request failed, or no account is currently signed in.
                        <br><br>
                        <code>reason</code> - String, reason for the failure (TODO: document further)
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>onSuccess</div>
                        Type: <code>function(account)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request succeeded and an account is currently
                        signed in.<br><br>
                        <code>account</code> - CanopyAccount object representing the user's account.
                    </div>
                </div>
            
                <br>On success, the CanopyAccount object is passed to the <b>onSuccess</b> callback.
                
                <br><br>Example:
                <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            alert("Hello " + account.username());
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyClient object)</span> .login(params)
            <div class=method_returns><i>Returns:</i> undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Attempt to sign in.
            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>onFailure</div>
                        Type: <code>function(reason)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request failed, or no account is currently signed in.
                        <br><br>
                        <code>reason</code> - String, reason for the failure (TODO: document further)
                    </div>
                    <div class=param_section>
                        <div class=param_name>onSuccess</div>
                        Type: <code>function(account)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request succeeded and an account is currently
                        signed in.<br><br>
                        <code>account</code> - CanopyAccount object representing the user's account.
                    </div>
                    <div class=param_section>
                        <div class=param_name>password</div>
                        Type: string<br>
                        Required.<br>
                        Password of account that is attempting to sign in.
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>username</div>
                        Type: string<br>
                        Required.<br>
                        Username or email address of account that is attempting to sign in.
                    </div>
                </div>
            
                <br>On success, a CanopyAccount object is passed to the
                <b>onSuccess</b> callback.  Also, a server-side session is
                created and a client-side cookie is created that identifies the
                session.

                <br><br>Example:
                <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.login({
        username: "demo",
        password: "1234",
        onSuccess: function(account) {
            alert("Welcome " + account.username());
        }
        onFailure: function(reason) {
            if (reason == "invalid_username_or_password") {
                alert("Invalid username or password");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyClient object)</span> .logout([params])
            <div class=method_returns><i>Returns:</i> undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Attempts to logout the currently-signed-in
            account.
            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>onFailure</div>
                        Type: <code>function(reason)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request failed, or no account is currently signed in.
                        <br><br>
                        <code>reason</code> - String, reason for the failure (TODO: document further)
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>onSuccess</div>
                        Type: <code>function()</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request succeeded and the account was signed out.  This
                        is also triggered if no account was signed in.
                    </div>
                </div>
            
                <br>On success, the currently active server-side session is
                destroyed.

                <br><br>Example:
                <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.logout({
        onSuccess: function(account) {
            alert("Goodbye! You've been signed out.");
        }
        onFailure: function(reason) {
            alert("Strange...we couldn't sign you out.");
        }
    });
}
                </div>
            </div>
        </div>
    </div><br>

    <h2><a name=intro>CanopyAccount object</a></h2>
    <h3>Account overview</h3>
    <p>
        A CanopyAccount represents a user who can sign-in to the canopy server.<br><br>
        It is necessary to obtain a CanopyAccount object before you can access a user's <b>Canopy-enabled</b> devices.<br><br>
        To obtain a CanopyAccount object for the currently-signed-in user:
        <div class=code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            alert("Hello " + account.username());
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
        </div>
    </p>

    <h3>CanopyAccount Methods</h3>
    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyAccount object)</span> .email()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain email address associated with this account.
            <br><br>Example:
            <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            alert("Your email is " + account.email());
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyAccount object)</span> .fetchDevices([params])
            <div class=method_returns><i>Returns:</i> undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain CanopyDevice objects representing the
            <b>Canopy-enabled</b> devices that can be monitored, controlled,
            and shared by this account.

            <br><br>If the CanopyAccount object (on which this method was
            invoked) is not the same as the currently-signed-in account, then
            the returned list of CanopyDevice objects will only contain those
            devices that <b>both</b> accounts have access to.

            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>onFailure</div>
                        Type: <code>function(reason)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request failed.
                        <br><br>
                        <code>reason</code> - String, reason for the failure (TODO: document further)
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>onSuccess</div>
                        Type: <code>function(devices)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request succeeded. <br><br>
                        <code>devices</code> - List of CanopyDevice objects.
                    </div>
                </div>
            
                <br>On success, the list of CanopyDevice objects is passed to the <b>onSuccess</b> callback.
                
                <br><br>Example:
                <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            account.fetchDevices({
                onSuccess: function(devices) {
                for (var i = 0; i &lt; devices.length; i++) {
                    jQuery("body").append("Device " + devices[i].friendlyName);
                }
                onFailure: function() {
                    alert("Oops!  Something went wrong.");
                }
            }
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyAccount object)</span> .username()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain username associated with this account.
            <br><br>Example:
            <div class=param_code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            alert("Hello " + account.username());
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
            </div>
        </div>
    </div><br>

    <h2><a name=intro>CanopyDevice object</a></h2>
    <h3>Device overview</h3>
    <p>
        A CanopyDevice represents a <b>Canopy-enabled</b> device that can be monitored, controlled, and shared.<br><br>

        CanopyDevice objects can be obtained by calling the <code>.fetchDevices</code> method of a CanopyAccount object.  For example:
        <div class=code>var canopy = new CanopyClient();
if (canopy != null) {
    canopy.fetchAccount({
        onSuccess: function(account) {
            account.fetchDevices({
                onSuccess: function(devices) {
                for (var i = 0; i &lt; devices.length; i++) {
                    jQuery("body").append("Device " + devices[i].friendlyName);
                }
                onFailure: function() {
                    alert("Oops!  Something went wrong.");
                }
            }
        }
        onFailure: function(reason) {
            if (reason == "not_logged_in") {
                alert("Please log in");
            }
            else {
                alert("Oops!  Something went wrong.");
            }
        }
    });
}
        </div>
    </p>
    <h3>Accessing device properties</h3>
    <p>
        Every <b>Canopy-enabled</b> device has a description written in the <a
        target=_blank href="sddl_spec.html">Smart Device Description
        Language</a>.  This description contains named properties of the following types:
        <ul>
            <li>basic sensor</li>
            <li>basic control</li>
            <li>basic child class</li>
            <li>fixed-length array of identical sensors</li>
            <li>fixed-length array of identical controls</li>
            <li>fixed-length array of identical child classes</li>
            <li>associative array of identical sensors</li>
            <li>associative array of identical controls</li>
            <li>associative array of identical child classes</li>
        </ul>
    </p>

    <p>
        This client library maps these "SDDL properties" to javascript in a
        natural way.
    </p>

    <h4>Sensor properties</h4>
    <p>
        Given a CanopyDevice object, you can access its sensors using:
    </p>
    <div class=code>device.sensors()</div>
    <p>
        This returns an object whose keys are string sensor names, and values are
        SDDLSensor objects.  An SDDLSensor object may represent a basic sensor
        or a fixed-length or associative array of sensors.
    </p>
    <p>
        To loop over all sensors:
    </p>
    <div class=code>var sensors = device.sensors();
for (var sensorName in sensors) {
    if (sensors.hasOwnProperty(sensorName) {
        var s = sensors[sensorName];
        /* your code here */
    }
}</div>

    <p>
        If you know the name of the sensor you are interested in, you can use:
    </p>
    <div class=code>var humiditySensor =  device.sensors().humidity;
var humiditySensor2 = device.sensors()["humidity"]; /* equivalent */</div>

    <p>
        You can check whether this sensor is a "basic" sensor, or an array,
        using:
    </p>
    <div class=code>var sensor = device.sensors().humidity;

if (!sensor) {
    /* Device doesn't have humidity sensor */
}
else if (sensor.isBasic()) {
    /* It is a "basic" sensor */
}
else if (sensor.isFixedArray()) {
    /* It is a fixed-length array of identical sensors */
}
else if (sensor.isMap()) {
    /* It is an associative array of identical sensors */
}
else {
    /* unknown type, possibly from the future */
}</div>

    <p>
        To get the latest known value(s) for a sensor, use:
    </p>
    <div class=code>var humidityValue = device.sensors().humidity.value();</div>
    <p>
        If the sensor is a basic sensor, this will return a singular value.  If
        the sensor is 
    </p>

    <h3>Device methods</h3>
    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .childClasses() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDLClass&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain object containing the device's child class
            properties.
            <br><br>
            The returned object's <i>keys</i> are string child class names.
            <br><br>
            The returned object's <i>values</i> are SDDLClass objects.
            <br><br>Example:
            <div class=param_code>var gpsClass = device.childClasses().gps;
alert("Coordinates: " + gpsClass.sensors.latitude.value() + ", " + gpsClass.sensors.longitude.value());</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .controls() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDLControl&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain object containing the device's control
            properties.
            <br><br>
            The <i>keys</i> are string control names.
            <br><br>
            The <i>values</i> are SDDLControl objects.
            <br><br>Example:
            <div class=param_code>
alert("Toast darkness level is currently set to: " + device.controls().darkness.value());

device.controls().darkness.setTargetValue(2, {
    onSuccess: function() {
        alert("Darkness level set to 2");
    },
    onFailure: function() {
        alert("Oops.  There was a problem changing the darkness level.");
    }
});
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .friendlyName()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain human-readable name of this device
            <br><br>Example return value: <code>"Zoidberg's Toaster Oven"</code>
            <br><br>Example:
            <div class=param_code>alert(device.friendlyName());</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .id()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain unique ID of this device
            <br><br>Example return value: <code>"a19daca0-0646-11e4-9191-0800200c9a66"</code>
            <br><br>Example:
            <div class=param_code>alert(device.id());</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .properties() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDL property&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Object containing all of the device's SDDL
            properties, including control properties, sensor properties, and
            child class properties.
            <br><br>
            The <i>keys</i> are string property names.
            <br><br>
            The <i>values</i> are a mix of SDDLClass, SDDLControl, and
            SDDLSensor objects.
            <br><br>Example:
            <div class=param_code>for (propName in device.properties()) {
    if (device.properties().hasOwnProperty(propName)) {
        if (device.properties()[propName].isSensor()) {
            alert("Sensor property " + propName);
        }
        else if (device.properties()[propName].isClass()) {
            alert("Child class " + propName);
        }
        else if (device.properties()[propName].isControl()) {
            alert("Control property " + propName);
        }
    }
}</div>
            <br>The <code>.properties</code> object is the union of the
            other members (<code>.sensors</code>, <code>.controls</code>, and
            <code>.classes</code>).  For example, a sensor named "humidity" can
            be accessed using either of the following:
            <div class=param_code>var humiditySensor =  device.properties().humidity;
var humiditySensor2 = device.sensors().humidity; /* returns same object */</div>

        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .sddlClass()
            <div class=method_returns><i>Returns:</i> SDDLClass</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain SDDLClass object for this device.
            <br><br>
            The SDDLClass is an object that provides information about the
            controls and sensors on a device.
            <br><br>Example:
            <div class=param_code>var cls = device.sddlClass();
var sensors = cls.sensors;
var msg = "This device has " + cls.numSensors() + " sensors.  They are: ";
for (var sensorName in cls.sensors) {
    if (cls.sensors.hasOwnProperty(sensorName)) {
        msg += sensors[i].name;
    }
}
alert(msg);
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(CanopyDevice object)</span> .sensors() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDLSensor&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Object containing the device's sensor
            properties.
            <br><br>
            The <i>keys</i> are string sensor names.
            <br><br>
            The <i>values</i> are SDDLSensor objects.
            <br><br>Example:
            <div class=param_code>var humiditySensor = device.sensors().humidity;
alert("The humidity is " + humiditySensor.value());
            </div>
        </div>
    </div><br>

    <h2><a name=intro>SDDLControl object</a></h2>
    <h3>SDDLControl overview</h3>
    <p>
        An SDDLControl represents a device setting that can be changed remotely.
    </p>

    <h3>SDDLControl Methods</h3>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .controlType()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain control type of this property.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"parameter"</code> - Control always has a "current value".</li>
                <li><code>"trigger"</code> - Control simply triggers an action.</li>
            </ul>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .datatype()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain datatype of this property.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"void"</code></li>
                <li><code>"string"</code></li>
                <li><code>"bool"</code></li>
                <li><code>"int8"</code></li>
                <li><code>"uint8"</code></li>
                <li><code>"int16"</code></li>
                <li><code>"uint16"</code></li>
                <li><code>"int32"</code></li>
                <li><code>"uint32"</code></li>
                <li><code>"float32"</code></li>
                <li><code>"float64"</code></li>
                <li><code>"datetime"</code></li>
            </ul>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .isBasic()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this control property is a basic property (i.e., not an array)<br><br>
            If this property is a basic (singular) control property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .isFixedArray()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this control property is a fixed-length array<br><br>
            If this property is a fixed-length array control property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .isMap()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this control property is a map property.<br><br>
            If this property is a map property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .minValue()
            <div class=method_returns><i>Returns:</i> number or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain minimum value allowed for this property.<br><br>
            If the property does not have a minimum value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .maxValue()
            <div class=method_returns><i>Returns:</i> number or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain maximum value allowed for this property.<br><br>
            If the property does not have a maximum value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .numericDisplayHint()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain numeric display hint.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"normal"</code></li>
                <li><code>"percentage"</code></li>
                <li><code>"scientific"</code></li>
                <li><code>"hex"</code></li>
            </ul>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .name()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain name of this control property.
            <br><br>Example:
            <div class=param_code>for (var i = 0; i &lt; device.controlList().length; i++) {
    alert("Control " + i + " is called: " + device.controlList()[i].name());
}</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .regex()
            <div class=method_returns><i>Returns:</i> string or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain regular expression criteria.
            <bR><br>
            If there is no regular expression criteria for this control's value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .setTargetValue(targetVal, [params])
            <div class=method_returns><i>Returns:</i> undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Attempt to set a control's target value remotely.
            <bR><br>
            This method triggers an AJAX request.  If you need to set multiple
            control values, it is more efficient to use a transaction.  See
            <code>device.beginControlTransaction</code>.
            <div class=param_outer>
                <div class=param_title><b>params</b><br>
                    type: object containing the following fields<br>
                </div>
                <div class=param_body>
                    <div class=param_section>
                        <div class=param_name>onFailure</div>
                        Type: <code>function(reason)</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request failed.
                        <br><br>
                        <code>reason</code> - String, reason for the failure (TODO: document further)
                    </div>
                    <div class=param_last_section>
                        <div class=param_name>onSuccess</div>
                        Type: <code>function()</code> returning <code>undefined</code><br>
                        Defaults to: <code>function(){}</code><br>
                        Callback that is triggered if the underlying AJAX
                        request succeeded and the control's target value was set.
                        <br><br>
                    </div>
                </div>
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .units()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain units string.
            <bR><br>
            If there are no units for this control's value, returns empty string <code>""</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .value()
            <div class=method_returns><i>Returns:</i> string, number, boolean, list, object, null, or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain the most recent value(s) for this control.
            <bR><br>
            If the SDDLControl is a <code>"trigger"</code>, returns <code>undefined</code>.
            <bR><br>
            Otherwise, if the SDDLControl represents a <b>basic control property</b>, a singular value
            is returned.
            <bR><br>
            Otherwise, if the SDDLControl represents a <b>fixed-length array of identical controls</b>, a list of values
            is returned.
            <bR><br>
            Otherwise, if the SDDLControl represents an <b>associative array of identical
            controls</b>, an object is returned.  The returned <i>keys</i> are
            the associative array's keys, and the <i>values</i> are the
            corresponding control values.

            <b>TODO:</b> Describe datatype mapping to JSON.
        </div>
    </div><br>

    <h2><a name=intro>SDDLSensor object</a></h2>
    <h3>SDDLSensor overview</h3>
    <p>
        An SDDLSensor represents a piece of data that is known to the device,
        that changes over time, and that can be monitored remotely.
    </p>

    <h3>SDDLSensor Methods</h3>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .datatype()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain datatype of this property.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"void"</code></li>
                <li><code>"string"</code></li>
                <li><code>"bool"</code></li>
                <li><code>"int8"</code></li>
                <li><code>"uint8"</code></li>
                <li><code>"int16"</code></li>
                <li><code>"uint16"</code></li>
                <li><code>"int32"</code></li>
                <li><code>"uint32"</code></li>
                <li><code>"float32"</code></li>
                <li><code>"float64"</code></li>
                <li><code>"datetime"</code></li>
            </ul>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .isBasic()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this sensor property is a basic property (i.e., not an array)<br><br>
            If this property is a basic (singular) sensor property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .isFixedArray()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this sensor property is a fixed-length array<br><br>
            If this property is a fixed-length array sensor property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .isMap()
            <div class=method_returns><i>Returns:</i> boolean</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Determine if this sensor property is a map property.<br><br>
            If this property is a map property, returns <code>true</code>.  Otherwise, returns <code>false</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .minValue()
            <div class=method_returns><i>Returns:</i> number or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain minimum value allowed for this property.<br><br>
            If the property does not have a minimum value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .maxValue()
            <div class=method_returns><i>Returns:</i> number or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain maximum value allowed for this property.<br><br>
            If the property does not have a maximum value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .numericDisplayHint()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain numeric display hint.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"normal"</code></li>
                <li><code>"percentage"</code></li>
                <li><code>"scientific"</code></li>
                <li><code>"hex"</code></li>
            </ul>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .name()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain name of this sensor property.
            <br><br>Example:
            <div class=param_code>for (var i = 0; i &lt; device.sensorList().length; i++) {
    alert("Sensor " + i + " is called: " + device.sensorList()[i].name());
}</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .regex()
            <div class=method_returns><i>Returns:</i> string or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain regular expression criteria.
            <bR><br>
            If there is no regular expression criteria for this sensor's value, returns <code>undefined</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .units()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain units string.
            <bR><br>
            If there are no units for this sensor's value, returns empty string <code>""</code>.
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLSensor object)</span> .value()
            <div class=method_returns><i>Returns:</i> string, number, boolean, list, object, null, or undefined</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain the most recent value(s) for this sensor.
            <bR><br>
            If the SDDLSensor is a <code>"trigger"</code>, returns <code>undefined</code>.
            <bR><br>
            Otherwise, if the SDDLSensor represents a <b>basic sensor property</b>, a singular value
            is returned.
            <bR><br>
            Otherwise, if the SDDLSensor represents a <b>fixed-length array of identical sensors</b>, a list of values
            is returned.
            <bR><br>
            Otherwise, if the SDDLSensor represents an <b>associative array of identical
            sensors</b>, an object is returned.  The returned <i>keys</i> are
            the associative array's keys, and the <i>values</i> are the
            corresponding sensor values.

            <b>TODO:</b> Describe datatype mapping to JSON.
        </div>
    </div><br>

    <h2><a name=intro>SDDLClass object</a></h2>
    <h3>SDDLClass overview</h3>
    <p>
        In SDDL, a "class" is a collection of sensors, controls, and child
        classes.
    </p>
    <p>
        An SDDLClass object may represent a single class, a fixed-length array
        of identical classes, or an associative array of identical classes.
    </p>

    <h3>SDDLClass Methods</h3>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLClass object)</span> .authors()
            <div class=method_returns><i>Returns:</i> list of strings</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain the list of authors who designed this
            SDDL class.
            <br><br>Example:
            <div class=param_code>for (var i = 0; i &lt; device.classList().length; i++) {
    var klass = device.classList()[i];
    alert("Class " + klass.name() + " was written by: " + klass.authors().join(","));
}</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLClass object)</span> .controls() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDLControl&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain object containing the SDDL class's control
            properties.
            <br><br>
            The <i>keys</i> are string control names.
            <br><br>
            The <i>values</i> are SDDLControl objects.
            <br><br>Example:
            <div class=param_code>
var klass = device.sddlClass();
alert("Toast darkness level is currently set to: " + klass.controls().darkness.value());

klass.controls().darkness.setTargetValue(2, {
    onSuccess: function() {
        alert("Darkness level set to 2");
    },
    onFailure: function() {
        alert("Oops.  There was a problem changing the darkness level.");
    }
});
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLClass object)</span> .name()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain name of this SDDL class property.
            <br><br>Example:
            <div class=param_code>for (var i = 0; i &lt; device.classList().length; i++) {
    alert("Class " + i + " is called: " + device.classList()[i].name());
}</div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLClass object)</span> .properties() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDL property&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Object containing all of the class's SDDL
            properties, including control properties, sensor properties, and
            child class properties.
            <br><br>
            The <i>keys</i> are string property names.
            <br><br>
            The <i>values</i> are a mix of SDDLClass, SDDLControl, and
            SDDLSensor objects.
            <br><br>Example:
            <div class=param_code>var klass = device.sddlClass();
for (propName in klass.properties()) {
    if (klass.properties().hasOwnProperty(propName)) {
        if (klass.properties()[propName].isSensor()) {
            alert("Sensor property " + propName);
        }
        else if (klass.properties()[propName].isControl()) {
            alert("Control property " + propName);
        }
        else if (klass.properties()[propName].isClass()) {
            alert("Child class " + propName);
        }
    }
}</div>
            <br>The <code>.properties</code> object is the union of the
            other members (<code>.sensors</code>, <code>.controls</code>, and
            <code>.classes</code>).  For example, a sensor named "humidity" can
            be accessed using either of the following:
            <div class=param_code>var humiditySensor =  klass.properties().humidity;
var humiditySensor2 = klass.sensors().humidity; /* returns same object */</div>

        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLClass object)</span> .sensors() <div class=method_returns><i>Returns:</i> Object {&lt;string&gt; : &lt;SDDLSensor&gt;, ...}</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Object containing the SDDL class's sensor
            properties.
            <br><br>
            The <i>keys</i> are string sensor names.
            <br><br>
            The <i>values</i> are SDDLSensor objects.
            <br><br>Example:
            <div class=param_code>var klass = device.sddlClass();
var humiditySensor = klass.sensors().humidity;
alert("The humidity is " + humiditySensor.value());
            </div>
        </div>
    </div><br>

    <div class=method_outer>
        <div class=method_title>
            <span class=method_class>(SDDLControl object)</span> .controlType()
            <div class=method_returns><i>Returns:</i> string</div>
        </div>
        <div class=method_body>
            <b>Description:</b> Obtain control type of this property.<br><br>
            Return value will be one of:
            <ul>
                <li><code>"parameter"</code> - Control always has a "current value".</li>
                <li><code>"trigger"</code> - Control simply triggers an action.</li>
            </ul>
        </div>
    </div><br>

    <h2>CanopyProperty</h4>
    <p>
        Every <b>Canopy-enabled</b> device has a description written in the <a
        target=_blank href="sddl_spec.html">Smart Device Description
        Language</a>.  This description contains named properties of the following types:
        <ul>
            <li>basic sensor</li>
            <li>basic control</li>
            <li>basic child class</li>
            <li>fixed-length array of identical sensors</li>
            <li>fixed-length array of identical controls</li>
            <li>fixed-length array of identical child classes</li>
            <li>associative array of identical sensors</li>
            <li>associative array of identical controls</li>
            <li>associative array of identical child classes</li>
        </ul>
    </p>

    <p>
        This client library maps these "SDDL properties" to javascript in a
        natural way.
    </p>
</div>
</body>
</html>
